.columns .report-card {
  max-width: 600px;
}

.report-card {
  border: 1px solid var(--ospo-card-border-color);
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  position: relative;

  &__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  &__title {
    font-size: 1.5rem;
    color: var(--ospo-text-color);
    text-transform: none;
    margin: 0;
  }
}

.audit-categories {
  border: 1px solid var(--ospo-border-color); /* Adds outer border to the categories component */
  border-collapse: collapse;
  width: 100%; /* Make the component span the width of the container */
  font-size: var(--ospo-report-category-font-size);
}

.category-wrapper {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  justify-content: space-between;
  align-items: center;
  padding: var(--ospo-default-padding); /* Adds spacing inside each category row */
  border-bottom: 1px solid var(--ospo-border-color); /* Adds a bottom border between rows */
}

.category-wrapper__title {
  min-width: 120px;
  max-width: 230px;
  width: 30%;

  @media only screen and (max-width: $screen-md) {
    .category-wrapper__title {
      font-size: 65%;
    }
  }
}

.category-wrapper__score {
  font-weight: bold;
  color: gray;
}

.category-wrapper:last-child {
  border-bottom: none; /* Removes bottom border for the last item */
}

.category-wrapper__progress-bar {
  width: 60%; /* Adjust progress bar to fit in the remaining space */
  height: 8px;
  background-color: var(--ospo-progress-background-color);
  position: relative;
  border-radius: 0; /* Remove the rounded borders */
}

.category-wrapper__progress-bar span {
  display: block;
  height: 100%;
}

.progress {
  &--low {
    background-color: var(--ospo-color-low);
  }

  &--moderate-low {
    background-color: var(--ospo-color-moderate-low);
  }

  &--moderate-high {
    background-color: var(--ospo-color-moderate-high);
  }

  &--high {
    background-color: var(--ospo-color-high);
  }
}

.report-repositories-wrapper {
  margin-top: 40px;
}

.report-repositories-wrapper h3 {
  text-transform: uppercase;
}

/* AUDIT */

.o9y-report-content {
  --ospo-audit-group-margin-bottom: 48px;
  --ospo-audit-margin-horizontal: 5px;
  --ospo-audit-description-padding-left: calc(var(--ospo-score-icon-size) + var(--ospo-score-icon-margin-left) + var(--ospo-score-icon-margin-right));
  --ospo-audit-description-padding-right: 10px;
  --chevron-size: 12px;
  --chevron-line-stroke: #757575;
  --ospo-report-line-height: 24px;
  --ospo-score-icon-size: 12px;
  --ospo-score-icon-margin-left: 6px;
  --ospo-score-icon-margin-right: 14px;
  --ospo-score-icon-margin: 0 var(--ospo-score-icon-margin-right) 0
    var(--ospo-score-icon-margin-left);
  --ospo-icon-square-size: calc(var(--ospo-score-icon-size) * 0.88);
}

.o9y-audit {
  // TODO: custom properties
  border-top: 1px solid var(--ospo-border-color);
  border-bottom: 1px solid var(--ospo-border-color);
}

.o9y-audit ~ .o9y-audit {
  border-top: none;
}

/* AUDIT GROUP */

.o9y-audit-group {
  margin-bottom: var(--ospo-audit-group-margin-bottom);
  position: relative;
}

.o9y-audit-group__summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.o9y-audit-group__header {
  letter-spacing: 0.8px;
  padding: var(--ospo-default-padding);
  padding-left: 0;
}

.o9y-audit-group__header,
.o9y-audit-group__summary {
  font-size: var(--ospo-report-font-size-secondary);
  line-height: var(--ospo-report-line-height-secondary);
  color: var(--color-gray-700);
}

.o9y-audit-group__title {
  text-transform: uppercase;
  font-weight: 500;
}

.o9y-audit__description {
  padding-left: var(--ospo-audit-description-padding-left);
  padding-right: var(--ospo-audit-description-padding-right);
  padding-top: 8px;
  padding-bottom: 8px;
  font-size: var(--ospo-report-font-size-secondary);
}

.o9y-audit-group__itemcount {
  color: var(--color-gray-600);
}

.o9y-audit-group__footer {
  color: var(--color-gray-600);
  display: block;
  margin-top: var(--ospo-default-padding);
}

.o9y-details,
.o9y-category-header__description,
.o9y-audit-group__footer {
  font-size: var(--ospo-report-font-size-secondary);
  line-height: var(--ospo-report-line-height-secondary);
}

.o9y-audit-explanation {
  margin: var(--audit-padding-vertical) 0
    calc(var(--audit-padding-vertical) / 2) var(--ospo-audit-margin-horizontal);
  line-height: var(--audit-explanation-line-height);
  display: inline-block;
}

.o9y-details-wrapper details > summary {
  /* Blink 89+ and Firefox will hide the arrow when display is changed from (new) default of `list-item` to block.  https://chromestatus.com/feature/6730096436051968*/
  display: block;
}
/* Safari and Blink <=88 require using the -webkit-details-marker selector */
.o9y-details-wrapper details > summary::-webkit-details-marker {
  display: none;
}

/* Expandable Details (Audit Groups, Audits) */
.o9y-audit__header {
  display: flex;
  align-items: center;
  padding: var(--ospo-default-padding);
}

.o9y-audit__title {
  flex: 1;
  font-size: var(--ospo-report-font-size-secondary);
}

/* chevron */
.o9y-chevron-container {
  margin: 0 var(--ospo-audit-margin-horizontal);
  margin-right: 0;
}

.o9y-chevron {
  --chevron-angle: 42deg;
  /* Edge doesn't support transform: rotate(calc(...)), so we define it here */
  --chevron-angle-right: -42deg;
  width: var(--chevron-size);
  height: var(--chevron-size);
  margin-top: calc((var(--ospo-report-line-height) - 12px) / 2);
}

.o9y-chevron__lines {
  transition: transform 0.4s;
  transform: translateY(var(--ospo-report-line-height));
}
.o9y-chevron__line {
  stroke: var(--chevron-line-stroke);
  stroke-width: var(--chevron-size);
  stroke-linecap: square;
  transform-origin: 50%;
  transform: rotate(var(--chevron-angle));
  transition: transform 300ms, stroke 300ms;
}

.o9y-expandable-details .o9y-chevron__line-right,
.o9y-expandable-details[open] .o9y-chevron__line-left {
  transform: rotate(var(--chevron-angle-right));
}

.o9y-expandable-details[open] .o9y-chevron__line-right {
  transform: rotate(var(--chevron-angle));
}

.o9y-expandable-details[open] .o9y-chevron__lines {
  transform: translateY(calc(var(--chevron-size) * -1));
}

.o9y-expandable-details[open] {
  animation: 300ms openDetails forwards;
  padding-bottom: var(--ospo-default-padding);
}

@keyframes openDetails {
  from {
    outline: 1px solid var(--ospo-report-background-color);
  }
  to {
    outline: 1px solid;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.24);
  }
}

@media screen and (max-width: 780px) {
  /* no black outline if we're not confident the entire table can be displayed within bounds */
  .o9y-expandable-details[open] {
    animation: none;
  }
}

.o9y-expandable-details[open] summary,
details.o9y-audit-list > summary {
  border-bottom: 1px solid var(--ospo-border-color);
}
details.o9y-audit-list[open] > summary {
  border-bottom-width: 0;
}

details .o9y-audit-list-toggletext--hide,
details[open] .o9y-audit-list-toggletext--show {
  display: none;
}
details[open] .o9y-audit-list-toggletext--hide {
  display: block;
}

.o9y-audit__display-text,
.o9y-chevron-container {
  margin: 0 var(--ospo-audit-margin-horizontal);
}
.o9y-chevron-container {
  margin-right: 0;
}

/* Score */
.o9y-audit__score-icon {
  width: var(--ospo-score-icon-size);
  height: var(--ospo-score-icon-size);
  margin: var(--ospo-score-icon-margin);
}

.o9y-audit--pass .o9y-audit__score-icon {
  border-radius: 100%;
  background: var(--ospo-color-high);
}

.o9y-audit--average .o9y-audit__score-icon {
  background: var(--ospo-color-moderate-high);
  width: var(--ospo-icon-square-size);
  height: var(--ospo-icon-square-size);
}

.o9y-audit--fail .o9y-audit__score-icon,
.o9y-audit--error .o9y-audit__score-icon {
  border-left: calc(var(--ospo-score-icon-size) / 2) solid transparent;
  border-right: calc(var(--ospo-score-icon-size) / 2) solid transparent;
  border-bottom: var(--ospo-score-icon-size) solid var(--ospo-color-low);
}

// TODO: error isn't supported at this time. 
.o9y-audit--error .o9y-audit__score-icon {
  background-image: var(--error-icon-url);
  background-repeat: no-repeat;
  background-position: center;
  border: none;
}

.o9y-audit--manual .o9y-audit__score-icon,
.o9y-audit--notapplicable .o9y-audit__score-icon {
  border: calc(0.2 * var(--ospo-score-icon-size)) solid var(--ospo-border-color);
  border-radius: 100%;
  background: none;
}

.o9y-audit--informative .o9y-audit__score-icon {
  border: calc(0.2 * var(--ospo-score-icon-size)) solid var(--ospo-border-color);
  border-radius: 100%;
}
